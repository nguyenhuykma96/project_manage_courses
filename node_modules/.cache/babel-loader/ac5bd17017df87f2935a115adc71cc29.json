{"ast":null,"code":"import * as Types from '../constants/ActionTypes';\nimport AuthService from './../../services/auth.service';\nimport Swal from 'sweetalert2';\nvar authService = new AuthService();\nexport var actRegisterUser = function actRegisterUser(user) {\n  return {\n    type: Types.REGISTER_USER,\n    user: user\n  };\n};\nexport var actRegisterUserRequest = function actRegisterUserRequest(user) {\n  return function (dispatch) {\n    authService.registerUser(user).then(function (res) {\n      console.log(res);\n\n      if (res.data) {\n        var newUser = {\n          TaiKhoan: user.TaiKhoan,\n          HoTen: user.HoTen,\n          Email: user.Email,\n          SoDT: user.SoDT,\n          MaLoaiNguoiDung: user.MaLoaiNguoiDung\n        };\n        dispatch(actRegisterUser(newUser));\n      } else {\n        Swal.fire({\n          type: 'error',\n          title: 'Fail...',\n          text: 'Register fail!'\n        });\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  };\n}; // login\n\nexport var actLoginUser = function actLoginUser(user) {\n  return {\n    type: Types.LOGIN,\n    user: user\n  };\n};\nexport var actLoginUserRequest = function actLoginUserRequest(user) {\n  return function (dispatch) {\n    authService.loginUser(user).then(function (res) {\n      if (typeof res.data !== 'string') {\n        // console.log(res.data);\n        dispatch(actLoginUser(user)); //alert\n\n        var Toast = Swal.mixin({\n          toast: true,\n          position: 'top-end',\n          showConfirmButton: false,\n          timer: 3000\n        });\n        Toast.fire({\n          type: 'success',\n          title: 'Welcome to CyberSoft'\n        });\n        sessionStorage.setItem('UserLogin', JSON.stringify(res.data[0]));\n      } else {\n        console.log('err');\n        Swal.fire({\n          type: 'error',\n          title: 'Oops...',\n          text: 'Login went wrong!'\n        });\n      }\n    }).catch(function (err) {\n      Swal.fire({\n        type: 'error',\n        title: 'Oops...',\n        text: 'Login went wrong!'\n      });\n    });\n  };\n};","map":{"version":3,"sources":["D:\\Cybersoft front end\\ReactJS\\Đồ án cuối khóa\\manage-courses\\src\\store\\action\\auth.action.js"],"names":["Types","AuthService","Swal","authService","actRegisterUser","user","type","REGISTER_USER","actRegisterUserRequest","dispatch","registerUser","then","res","console","log","data","newUser","TaiKhoan","HoTen","Email","SoDT","MaLoaiNguoiDung","fire","title","text","catch","err","actLoginUser","LOGIN","actLoginUserRequest","loginUser","Toast","mixin","toast","position","showConfirmButton","timer","sessionStorage","setItem","JSON","stringify"],"mappings":"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","sourcesContent":["import * as Types from '../constants/ActionTypes';\r\nimport AuthService from './../../services/auth.service';\r\nimport Swal from 'sweetalert2';\r\n\r\nconst authService = new AuthService();\r\nexport const actRegisterUser = user => {\r\n    return {\r\n        type: Types.REGISTER_USER,\r\n        user\r\n    }\r\n}\r\nexport const actRegisterUserRequest = user => {\r\n    return dispatch => {\r\n        authService.registerUser(user)\r\n            .then(res => {\r\n                console.log(res);\r\n                \r\n                if (res.data) {\r\n                    const newUser = {\r\n                        TaiKhoan: user.TaiKhoan,\r\n                        HoTen: user.HoTen,\r\n                        Email: user.Email,\r\n                        SoDT: user.SoDT,\r\n                        MaLoaiNguoiDung: user.MaLoaiNguoiDung,\r\n                    }\r\n                    dispatch(actRegisterUser(newUser));\r\n                }\r\n                else {\r\n                    Swal.fire({\r\n                        type: 'error',\r\n                        title: 'Fail...',\r\n                        text: 'Register fail!'\r\n                    });\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            })\r\n    }\r\n}\r\n// login\r\nexport const actLoginUser = (user) => {\r\n    return {\r\n        type: Types.LOGIN,\r\n        user\r\n    }\r\n}\r\nexport const actLoginUserRequest = (user) => {\r\n    return dispatch => {\r\n        authService.loginUser(user)\r\n            .then(res => {\r\n                if (typeof res.data !== 'string') {\r\n                    // console.log(res.data);\r\n                    \r\n                    dispatch(actLoginUser(user));\r\n                    //alert\r\n                    const Toast = Swal.mixin({\r\n                        toast: true,\r\n                        position: 'top-end',\r\n                        showConfirmButton: false,\r\n                        timer: 3000\r\n                    });\r\n                    Toast.fire({\r\n                        type: 'success',\r\n                        title: 'Welcome to CyberSoft'\r\n                    })\r\n                    sessionStorage.setItem('UserLogin', JSON.stringify(res.data[0]));\r\n\r\n                } else {\r\n                    console.log('err');\r\n                    Swal.fire({\r\n                        type: 'error',\r\n                        title: 'Oops...',\r\n                        text: 'Login went wrong!',\r\n                    })\r\n                }\r\n            })\r\n            .catch(err => {\r\n                Swal.fire({\r\n                    type: 'error',\r\n                    title: 'Oops...',\r\n                    text: 'Login went wrong!',\r\n                })\r\n            })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}